

; ========================================================================================
; | Modulname:   delay.s                                  | Prozessor:  STM32G474        |
; |--------------------------------------------------------------------------------------|
; | Ersteller:   P. Raab                                  | Datum: 06.09.2021            |
; |--------------------------------------------------------------------------------------|
; | Version:   1.0               | Projekt:  Lauflicht    | Assembler:  ARM-ASM          |
; |--------------------------------------------------------------------------------------|
; | Aufgabe:                                                                             |
; |    Mikrocontroller soll ein Vielfaches von 1 ms warten. Die Wartezeit wird als       |
; |    Parameter ueber Register R0 uebergeben.                                           |
; |                                                                                      |
; |--------------------------------------------------------------------------------------|
; | Bemerkungen:                                                                         |
; |                                                                                      |
; |                                                                                      |
; |--------------------------------------------------------------------------------------|
; | Aenderungen:                                                                         |
; |     06.09.2021        P. Raab              Initialversion                            |
; |                                                                                      |
; ========================================================================================

; ------------------------------- includierte Dateien ------------------------------------

	
	
; ------------------------------- exportierte Variablen ------------------------------------


; ------------------------------- importierte Variablen ------------------------------------		
		

; ------------------------------- exportierte Funktionen -----------------------------------		
	EXPORT  up_delay

; ------------------------------- importierte Funktionen -----------------------------------


; ------------------------------- symbolische Konstanten ------------------------------------


; ------------------------------ Datensection / Variablen -----------------------------------		

	
; ------------------------------- Codesection / Programm ------------------------------------
   AREA	  DELAY, code


up_delay    PROC
    PUSH   {R8, R1}
    MOV    R1, #4000
    MUL    R8, R8, R1
	ALIGN  4
loop_delay 
    SUB    R8, R8, #1
    CMP    R8, #0
    BNE    loop_delay
	NOP
    POP    {R8, R1}
    BX     lr
    ENDP
		
    END